<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout_main}">
<head>
<meta charset="utf-8">

<script>


    
   
    function classAdd(){
//       var token = $("meta[name='_csrf']").attr("content");
//      var header = $("meta[name='_csrf_header']").attr("content");

        var url = "/applyList";
        var paramData = {
            classId : $("#classId").val()
        };

        var param = JSON.stringify(paramData);

        $.ajax({
            url      : url,
            type     : "POST",
            contentType : "application/json",
            data     : param,
//             beforeSend : function(xhr){
                /* 데이터를 전송하기 전에 헤더에 csrf값을 설정 */
//                 xhr.setRequestHeader(header, token);           
//                },
            dataType : "json",
            cache   : false,
            success  : function(result, status){
            	var applyId = result;
            	
            	if (applyId > 0) {
                	alert("수강신청이 완료되었습니다. (" + result + ")");
            	} else {
            		alert("수강신청에 실패하였습니다. (" + result + ")");
            	}
//                location.href='/';
				},
            error : function(jqXHR, status, error){

                if(jqXHR.status == '401'){
                    alert('로그인 후 이용해주세요');
                    location.href='/users/signIn';
                } else{
                    alert(jqXHR.responseText);
                }

            }
        });
    }

</script>

<style>
img{
	width: 300px;
	height: 500px;
}

/* 레이아웃 외곽 너비 400px 제한*/
.wrap{
    max-width: 480px;
    margin: 0 auto; /* 화면 가운데로 */
    background-color: #fff;
    height: 100%;
    padding: 20px;
    box-sizing: border-box;

}
.reviewform textarea{
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
}
.rating .rate_radio {
    position: relative;
    display: inline-block;
    z-index: 20;
    opacity: 0.001;
    width: 60px;
    height: 60px;
    background-color: #fff;
    cursor: pointer;
    vertical-align: top;
    display: none;
}
.rating .rate_radio + label {
    position: relative;
    display: inline-block;
    margin-left: -4px;
    z-index: 10;
    width: 60px;
    height: 60px;
    background-image: url('/img/icons/star.png');
    background-repeat: no-repeat;
    background-size: 60px 60px;
    cursor: pointer;
    background-color: #f0f0f0;
}
.rating .rate_radio:checked + label {
    background-color: #ff8;
}

.warning_msg {
    display: none;
    position: relative;
    text-align: center;
    background: #ffffff;
    line-height: 26px;
    width: 100%;
    color: red;
    padding: 10px;
    box-sizing: border-box;
    border: 1px solid #e0e0e0;
}
</style>

<title>courses</title>
</head>
<body>

	<div layout:fragment="content">
   <!-- Header Start -->
    <div class="container-fluid bg-primary py-5 mb-5 page-header">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10 text-center">
                    <h1 class="display-3 text-white animated slideInDown">Courses</h1>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb justify-content-center">
                            <li class="breadcrumb-item"><a class="text-white" href="/">Home</a></li>
                            <li class="breadcrumb-item"><a class="text-white" href="#">Class</a></li>
                            <li class="breadcrumb-item text-white active" aria-current="page">Class</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->
		<input type="hidden" id="classId" th:value="${adminClassDto.id}">
	    <div class="course-details__content">
	       <div class="course__img w-img mb-30">
	          <img th:src="${classDetail.imgUrl}" th:alt="이미지">
	       </div>
	       
	           <div class="col-lg-3 col-sm-4 wow fadeInUp">
                    <div class="service-item text-center pt-3">
                        <div class="p-4">
                            <i class="fa fa-3x fa-book-open text-primary mb-4"></i>
                            <h5 class="mb-3">무료</h5>
                            <input type="button" class="btn btn-primary btn-lg" onclick="classAdd()" value="수강신청">
                        </div>
                    </div>
                </div>
	       
	       <div class="course__tab-2 mb-45">
	          <ul class="nav nav-tabs" id="courseTab" role="tablist">
	             <li class="nav-item" role="presentation">
	               <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab" aria-controls="description" aria-selected="true"> <i class="icon_ribbon_alt"></i> <span>Discription</span> </button>
	             </li>
	             <li class="nav-item" role="presentation">
	               <button class="nav-link" id="review-tab" data-bs-toggle="tab" data-bs-target="#review" type="button" role="tab" aria-controls="review" aria-selected="false"> <i class="icon_star_alt"></i> <span>Reviews</span> </button>
	             </li>
	           </ul>
	       </div>
	    </div>
	    
	    		<!-- 커리큘럼 -->
                <div class="course__tab-content mb-95">
              <div class="tab-content" id="courseTabContent">
                 <div class="tab-pane fade active show" id="description" role="tabpanel" aria-labelledby="description-tab">
                    <div class="course__description">
                       <h3>Course Overview</h3>
                       <p>Only a quid me old mucker squiffy tomfoolery grub cheers ruddy cor blimey guvnor in my flat, up the duff Eaton car boot up the kyver pardon you A bit of how's your father David skive off sloshed, don't get shirty with me chip shop vagabond crikey bugger Queen's English chap. Matie boy nancy boy bite your arm off up the kyver old no biggie fantastic boot, David have it show off show off pick your nose and blow off lost the plot porkies bits and bobs only a quid bugger all mate, absolutely bladdered bamboozled it's your round don't get shirty with me down the pub well. Give us a bell bits and bobs Charles he lost his bottle super my lady cras starkers bite your arm off Queen's English, pardon me horse play Elizabeth a blinding shot chinwag knees up do one David, blag cup of tea Eaton so I said bleeding haggle James Bond cup of char. Gosh William ummm I'm telling crikey burke I don't want no agro A bit of how's your father bugger all mate off his nut that, what a plonker cuppa owt to do with me nancy boy show off show off pick your nose and blow off spiffing good time lavatory me old mucker, chimney pot what a load of rubbish boot squiffy lost the plot brolly wellies excuse my french.</p>

                 	</div>
                 </div>
                 <!-- 리뷰 -->
                 <div class="tab-pane fade" id="review" role="tabpanel" aria-labelledby="review-tab">
                    <div class="course__review">
                       <h3>Reviews</h3>
                    </div>
                    <div class="wrap">
					    <h1>후기</h1>
					    <form name="reviewform" class="reviewform" method="post" action="/save">
					        <input type="hidden" name="rate" id="rate" value="0"/>
					        <p class="title_star">별점과 리뷰를 남겨주세요.</p>
					 
					        <div class="review_rating">
					            <div class="warning_msg">별점을 선택해 주세요.</div>
					            <div class="rating">
					                <!-- 해당 별점을 클릭하면 해당 별과 그 왼쪽의 모든 별의 체크박스에 checked 적용 -->
					                <input type="checkbox" name="rating" id="rating1" value="1" class="rate_radio" title="1점">
					                <label for="rating1"></label>
					                <input type="checkbox" name="rating" id="rating2" value="2" class="rate_radio" title="2점">
					                <label for="rating2"></label>
					                <input type="checkbox" name="rating" id="rating3" value="3" class="rate_radio" title="3점" >
					                <label for="rating3"></label>
					                <input type="checkbox" name="rating" id="rating4" value="4" class="rate_radio" title="4점">
					                <label for="rating4"></label>
					                <input type="checkbox" name="rating" id="rating5" value="5" class="rate_radio" title="5점">
					                <label for="rating5"></label>
					            </div>
					        </div>
					        <div class="review_contents">
					            <div class="warning_msg">5자 이상으로 작성해 주세요.</div>
					            <textarea rows="10" class="review_textarea"></textarea>
					        </div>   
					        <div class="cmd">
					            <input type="button" name="save" id="save" value="등록">
					        </div>
					    </form>
					</div>
                 </div>
               </div>
           </div>
	</div>
</body>
</html>