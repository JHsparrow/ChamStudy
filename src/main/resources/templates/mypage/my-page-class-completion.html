<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout_main}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>마이페이지</title>

<!-- 관리자 css -->
<link href="/css/app.css" rel="stylesheet">
<link href="/css/style.css" rel="stylesheet">
<link href="/main/css/my_page_style.css" rel="stylesheet">
</head>
<body>
	<div layout:fragment="content">
		<div class="main">
			<main class="content">
				<div class="container-fluid p-0">

					<div class="row">
						<!-- 마이페이지 옆에 nav바 레이아웃으로 바꿈 -->
						<div class="col-md-4 col-xl-3">
							<div th:replace="fragments/main_mypage_nav::mypagenav"></div>
						</div>
						<!-- 마이페이지 옆에 nav바 레이아웃으로 바꿈 end -->
						<div class="col-md-8 col-xl-9">
							<div class="card minheight">
								<!-- 유저 정보 -->
								<div class="card-header">
									<h2 class="d-inline-block" sec:authentication="principal.name"></h2>
									<h2 class="d-inline-block">님 반갑습니다.</h2>
								</div>

								<!-- 컨텐츠 상단(검색) -->
<<<<<<< HEAD
								<div class="row ms-5 mb-4">
									<div class="col-sm-6 col-md-6">
										<div class="dataTables_length" id="datatables-orders_length">
											<select name="searchQuery" aria-controls="datatables-orders"
												class="form-select form-select-sm width30 height35">
												<option value="IT">IT</option>
												<option value="자격증">자격증</option>
												<option value="어학">어학</option>
											</select>
										</div>
									</div>
								</div>

=======
								<form th:action="@{/mypage/completion}" method="get"
									role="search">
									<div class="row ms-5 mb-4">
										<div class="col-sm-6 col-md-6">
											<div class="dataTables_length" id="datatables-orders_length">
												<select name="searchQuery" aria-controls="datatables-orders"
													class="form-select form-select-sm width30 height35">
													<option value="IT">IT</option>
													<option value="자격증">자격증</option>
													<option value="어학">어학</option>
												</select>
											</div>
										</div>
									</div>
								</form>
>>>>>>> ad6083d2f79728e494ecf806688c10bf88c57304

								<!-- 강의 목록 -->
								<th:block th:each="completion, status : ${completionList.getContent()}">
									<div class="row text-center justify-content-center">
										<div class="col-12 col-md-5 mx-4">
											<div class="card">
												<img class="card-img-top" th:src="${completion.getImgUrl}"
													th:alt="${completion.getOriImgName}">
												<div class="card-header pd-07 d-flex">
													<div class="d-inline-block">
														<p class="card-ttl mb-0">[[${completion.CategoryName}]] - [[${completion.subCategoryName}]]</p>
														<p class="card-ttl class-title mb-0">[[${completion.ClassName}]]</p>
													</div>
													<div class="d-inline-block">
														<!-- 동영상 재생 매핑해주기 -->
														<a><i class="fa-regular fa-circle-play"></i></a>
													</div>
												</div>
												<div class="card-body pd-0">
													<span class="d-flex">학습률</span>
													<div th:if="${completion.progress} == '100'">
														<div class="progress ms-6 me-2" role="progressbar"
															aria-label="Default striped example" aria-valuenow="10"
															aria-valuemin="0" aria-valuemax="100">
															<div class="progress-bar progress-bar-striped"
																style="width: 100%"></div>
														</div>
													</div>
													<div>
														<p>
															<small>[[${completion.startDate}]] ~ [[${completion.endDate}]]</small>
														</p>
													</div>
												</div>
											</div>
										</div>
									</div>
								</th:block>

								<!-- 페이징 버튼 -->
								<div class="row justify-content-center">
									<div class="col-sm-12 col-md-3">
										<div class="dataTables_info" id="datatables-orders_info" role="status" aria-live="polite"></div>
									</div>
									<div class="col-sm-12 col-md-6">
										<nav th:with="start=${(completionList.number/maxPage)*maxPage + 1},
										end=(${(completionList.totalPages == 0) ? 1 : (start + (maxPage -1) < completionList.totalPages ? start + (maxPage -1) : completionList.totalPages)})">
										<div class="dataTables_paginate paging_simple_numbers block-27" id="datatables-orders_paginate">
										
											<ul class="pagination">
												<li th:classappend="${completionList.first}? 'disabled'"
												class="paginate_button page-item previous disabled mx-1" id="datatables-orders_previous">
													<a th:href="@{'/mypage/completion' + '?searchQuery=' + ${userSearchDto.searchQuery} + '&page=' + ${completionList.number-1}}"
													 aria-controls="datatables-orders" data-dt-idx="0" tabindex="0" class="page-link">&lt </a>
												</li>
												
												
												<li th:each="page: ${#numbers.sequence(start, end)}"
												th:classappend="${completionList.number eq page-1}?'active':''"
												class="paginate_button page-item mx-1">
													<a th:href="@{'/myclass/completion' + '?searchQuery=' + ${userSearchDto.searchQuery} + '&page=' + ${page-1}}"
													 aria-controls="datatables-orders" data-dt-idx="1" tabindex="0" class="page-link">[[${page}]]</a>
												</li>
												
												
												<li th:classappend="${completionList.last}? 'disabled'"
												class="paginate_button page-item next" id="datatables-orders_next  mx-1">
													<a th:href="@{'/myclass/completion' + '?searchQuery=' + ${userSearchDto.searchQuery} + '&page=' + ${completionList.number+1}}"
													 aria-controls="datatables-orders" data-dt-idx="3" tabindex="0" class="page-link">&gt</a>
												</li>
											</ul>
										</div>
									</nav>
									</div>
								</div>
								<!-- 페이징 버튼 -->

							</div>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>
</body>
</html>